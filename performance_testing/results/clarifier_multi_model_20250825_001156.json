{
  "metadata": {
    "name": "Clarifier Agent Test Suite",
    "description": "Test scenarios for the Clarifier agent - bank and period extraction",
    "version": "1.0.0",
    "default_thresholds": {
      "max_latency_ms": 5000,
      "min_confidence": 0.8,
      "max_tokens": 500,
      "max_cost": 0.1
    },
    "model_comparison": {
      "small": {
        "total_tests": 10,
        "passed": 8,
        "failed": 2,
        "success_rate": 80.0,
        "latency": {
          "mean": 1665.4488325119019,
          "median": 1584.4310522079468,
          "min": 1076.0231018066406,
          "max": 2724.3781089782715,
          "stdev": 523.1402553378585
        },
        "tokens": {
          "total": 34325,
          "mean": 3432.5
        },
        "cost": {
          "total": 0.003516,
          "mean": 0.0003516
        },
        "duration_seconds": 16.655809
      },
      "medium": {
        "total_tests": 10,
        "passed": 10,
        "failed": 0,
        "success_rate": 100.0,
        "latency": {
          "mean": 1627.979016304016,
          "median": 1524.699330329895,
          "min": 1339.5540714263916,
          "max": 2120.499849319458,
          "stdev": 255.62774650787927
        },
        "tokens": {
          "total": 31778,
          "mean": 3177.8
        },
        "cost": {
          "total": 0.009659,
          "mean": 0.0009659
        },
        "duration_seconds": 16.280979
      },
      "large": {
        "total_tests": 10,
        "passed": 10,
        "failed": 0,
        "success_rate": 100.0,
        "latency": {
          "mean": 1660.303807258606,
          "median": 1637.4788284301758,
          "min": 1332.3729038238525,
          "max": 2351.607084274292,
          "stdev": 273.99721029621867
        },
        "tokens": {
          "total": 33964,
          "mean": 3396.4
        },
        "cost": {
          "total": 0.034445,
          "mean": 0.0034445
        },
        "duration_seconds": 16.604135
      }
    }
  },
  "summary": {
    "total_tests": 30,
    "passed": 28,
    "failed": 2,
    "success_rate": 93.33333333333333,
    "latency": {
      "mean": 1651.2438853581746,
      "median": 1592.347502708435,
      "min": 1076.0231018066406,
      "max": 2724.3781089782715,
      "stdev": 358.8829822501361
    },
    "tokens": {
      "total": 100067,
      "mean": 3335.5666666666666
    },
    "cost": {
      "total": 0.04762,
      "mean": 0.0015873333333333334
    }
  },
  "results": [
    {
      "scenario_id": "clarifier_001",
      "scenario_name": "Clear Bank and Period - RBC Q3 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1408,
          "cost": 0.000142
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q3"
              ]
            }
          },
          "tokens_used": 1965,
          "cost": 0.000204
        },
        "tokens_used": 3373,
        "cost": 0.000346
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 2011.6279125213623,
      "tokens_used": 3373,
      "cost": 0.000346,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me RBC's Q3 2024 financial results",
      "timestamp": "2025-08-25T00:11:09.102968"
    },
    {
      "scenario_id": "clarifier_002",
      "scenario_name": "Multiple Banks - Big Six Q2 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2,
            3,
            4,
            5,
            6
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1462,
          "cost": 0.000153
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q2"
              ]
            }
          },
          "tokens_used": 3151,
          "cost": 0.000322
        },
        "tokens_used": 4613,
        "cost": 0.00047500000000000005
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2,
          3,
          4,
          5,
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q2"
        ]
      },
      "latency_ms": 2152.9362201690674,
      "tokens_used": 4613,
      "cost": 0.00047500000000000005,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare the Big Six banks performance in Q2 2024",
      "timestamp": "2025-08-25T00:11:11.256095"
    },
    {
      "scenario_id": "clarifier_003",
      "scenario_name": "Ambiguous Bank - No Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like to see the latest financial metrics for?",
          "What time period would you like to see the latest financial metrics for?"
        ],
        "tokens_used": 2957,
        "cost": 0.00030199999999999997
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 1226.3710498809814,
      "tokens_used": 2957,
      "cost": 0.00030199999999999997,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What are the latest financial metrics?",
      "timestamp": "2025-08-25T00:11:12.482633"
    },
    {
      "scenario_id": "clarifier_004",
      "scenario_name": "Clear Bank - Missing Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            2
          ],
          "banks_detail": {
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1403,
          "cost": 0.000142
        },
        "clarifications": [
          "What time period would you like to see revenue for?"
        ],
        "tokens_used": 3321,
        "cost": 0.00033600000000000004
      },
      "expected_output": {
        "status": "needs_clarification",
        "bank_ids": [
          2
        ],
        "needs_clarification": true
      },
      "latency_ms": 1229.9420833587646,
      "tokens_used": 3321,
      "cost": 0.00033600000000000004,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me TD Bank's revenue",
      "timestamp": "2025-08-25T00:11:13.712700"
    },
    {
      "scenario_id": "clarifier_005",
      "scenario_name": "Latest Period Request",
      "success": false,
      "actual_output": {
        "status": "needs_clarification",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            3
          ],
          "banks_detail": {
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1405,
          "cost": 0.000142
        },
        "clarifications": [
          "What time period would you like to see for BMO's latest quarterly results?"
        ],
        "tokens_used": 3323,
        "cost": 0.000337
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          3
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 1227.557897567749,
      "tokens_used": 3323,
      "cost": 0.000337,
      "confidence": null,
      "error": "Expected status 'success', got 'needs_clarification'",
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Give me BMO's latest quarterly results",
      "timestamp": "2025-08-25T00:11:14.940400"
    },
    {
      "scenario_id": "clarifier_006",
      "scenario_name": "YTD Period Request",
      "success": false,
      "actual_output": {
        "status": "needs_clarification",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            4
          ],
          "banks_detail": {
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1406,
          "cost": 0.000142
        },
        "clarifications": [
          "What time period would you like to see Scotia's performance for?"
        ],
        "tokens_used": 3345,
        "cost": 0.00034
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          4
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3"
        ]
      },
      "latency_ms": 1076.0231018066406,
      "tokens_used": 3345,
      "cost": 0.00034,
      "confidence": null,
      "error": "Expected status 'success', got 'needs_clarification'",
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show Scotia's YTD 2025 performance",
      "timestamp": "2025-08-25T00:11:16.016571"
    },
    {
      "scenario_id": "clarifier_007",
      "scenario_name": "Bank Alias - National Bank",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            6
          ],
          "banks_detail": {
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1410,
          "cost": 0.000143
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q1"
              ]
            }
          },
          "tokens_used": 1954,
          "cost": 0.000202
        },
        "tokens_used": 3364,
        "cost": 0.00034500000000000004
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q1"
        ]
      },
      "latency_ms": 1484.0459823608398,
      "tokens_used": 3364,
      "cost": 0.00034500000000000004,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What is National Bank's Q1 2024 net income?",
      "timestamp": "2025-08-25T00:11:17.500687"
    },
    {
      "scenario_id": "clarifier_008",
      "scenario_name": "Multiple Specific Banks",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1454,
          "cost": 0.000152
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2023,
              "quarters": [
                "Q4"
              ]
            }
          },
          "tokens_used": 2198,
          "cost": 0.000226
        },
        "tokens_used": 3652,
        "cost": 0.00037799999999999997
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q4"
        ]
      },
      "latency_ms": 2724.3781089782715,
      "tokens_used": 3652,
      "cost": 0.00037799999999999997,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare RBC and TD performance in Q4 2023",
      "timestamp": "2025-08-25T00:11:20.225187"
    },
    {
      "scenario_id": "clarifier_009",
      "scenario_name": "Full Year Period",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            5
          ],
          "banks_detail": {
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1407,
          "cost": 0.000142
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2023,
              "quarters": [
                "Q1",
                "Q2",
                "Q3",
                "Q4"
              ]
            }
          },
          "tokens_used": 1971,
          "cost": 0.000205
        },
        "tokens_used": 3378,
        "cost": 0.000347
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          5
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3",
          "Q4"
        ]
      },
      "latency_ms": 1684.8161220550537,
      "tokens_used": 3378,
      "cost": 0.000347,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show CIBC's full year 2023 results",
      "timestamp": "2025-08-25T00:11:21.910114"
    },
    {
      "scenario_id": "clarifier_010",
      "scenario_name": "Clear Period - Ambiguous Bank",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like to see the efficiency ratio for?"
        ],
        "tokens_used": 2999,
        "cost": 0.00031
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 1836.789846420288,
      "tokens_used": 2999,
      "cost": 0.00031,
      "confidence": null,
      "error": null,
      "model_used": "small",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What was the efficiency ratio in Q2 2024?",
      "timestamp": "2025-08-25T00:11:23.746988"
    },
    {
      "scenario_id": "clarifier_001",
      "scenario_name": "Clear Bank and Period - RBC Q3 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1408,
          "cost": 0.000427
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q3"
              ]
            }
          },
          "tokens_used": 1914,
          "cost": 0.000581
        },
        "tokens_used": 3322,
        "cost": 0.001008
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 1502.2799968719482,
      "tokens_used": 3322,
      "cost": 0.001008,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me RBC's Q3 2024 financial results",
      "timestamp": "2025-08-25T00:11:25.249961"
    },
    {
      "scenario_id": "clarifier_002",
      "scenario_name": "Multiple Banks - Big Six Q2 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2,
            3,
            4,
            5,
            6
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1419,
          "cost": 0.000433
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q2"
              ]
            }
          },
          "tokens_used": 3107,
          "cost": 0.000939
        },
        "tokens_used": 4526,
        "cost": 0.001372
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2,
          3,
          4,
          5,
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q2"
        ]
      },
      "latency_ms": 1671.1492538452148,
      "tokens_used": 4526,
      "cost": 0.001372,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare the Big Six banks performance in Q2 2024",
      "timestamp": "2025-08-25T00:11:26.921187"
    },
    {
      "scenario_id": "clarifier_003",
      "scenario_name": "Ambiguous Bank - No Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like to see the latest financial metrics for?",
          "What time period would you like to see the latest financial metrics for?"
        ],
        "tokens_used": 2952,
        "cost": 0.000902
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 1454.4470310211182,
      "tokens_used": 2952,
      "cost": 0.000902,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What are the latest financial metrics?",
      "timestamp": "2025-08-25T00:11:28.375734"
    },
    {
      "scenario_id": "clarifier_004",
      "scenario_name": "Clear Bank - Missing Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            2
          ],
          "banks_detail": {
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1403,
          "cost": 0.000426
        },
        "clarifications": [
          "What time period would you like to see TD Bank's revenue for?"
        ],
        "tokens_used": 3324,
        "cost": 0.001011
      },
      "expected_output": {
        "status": "needs_clarification",
        "bank_ids": [
          2
        ],
        "needs_clarification": true
      },
      "latency_ms": 1413.3269786834717,
      "tokens_used": 3324,
      "cost": 0.001011,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me TD Bank's revenue",
      "timestamp": "2025-08-25T00:11:29.789106"
    },
    {
      "scenario_id": "clarifier_005",
      "scenario_name": "Latest Period Request",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            3
          ],
          "banks_detail": {
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1405,
          "cost": 0.000426
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2025,
              "quarters": [
                "Q3"
              ]
            }
          },
          "tokens_used": 1911,
          "cost": 0.00058
        },
        "tokens_used": 3316,
        "cost": 0.001006
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          3
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 1339.5540714263916,
      "tokens_used": 3316,
      "cost": 0.001006,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Give me BMO's latest quarterly results",
      "timestamp": "2025-08-25T00:11:31.128731"
    },
    {
      "scenario_id": "clarifier_006",
      "scenario_name": "YTD Period Request",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            4
          ],
          "banks_detail": {
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1406,
          "cost": 0.000427
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2025,
              "quarters": [
                "Q1",
                "Q2",
                "Q3"
              ]
            }
          },
          "tokens_used": 1925,
          "cost": 0.000586
        },
        "tokens_used": 3331,
        "cost": 0.001013
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          4
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3"
        ]
      },
      "latency_ms": 1732.3172092437744,
      "tokens_used": 3331,
      "cost": 0.001013,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show Scotia's YTD 2025 performance",
      "timestamp": "2025-08-25T00:11:32.861207"
    },
    {
      "scenario_id": "clarifier_007",
      "scenario_name": "Bank Alias - National Bank",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            6
          ],
          "banks_detail": {
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1410,
          "cost": 0.000428
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q1"
              ]
            }
          },
          "tokens_used": 1909,
          "cost": 0.00058
        },
        "tokens_used": 3319,
        "cost": 0.001008
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q1"
        ]
      },
      "latency_ms": 1996.8171119689941,
      "tokens_used": 3319,
      "cost": 0.001008,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What is National Bank's Q1 2024 net income?",
      "timestamp": "2025-08-25T00:11:34.858177"
    },
    {
      "scenario_id": "clarifier_008",
      "scenario_name": "Multiple Specific Banks",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1410,
          "cost": 0.000428
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "1": {
              "fiscal_year": 2023,
              "quarters": [
                "Q4"
              ]
            },
            "2": {
              "fiscal_year": 2023,
              "quarters": [
                "Q4"
              ]
            }
          }
        },
        "tokens_used": 1410,
        "cost": 0.000428
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q4"
        ]
      },
      "latency_ms": 2120.499849319458,
      "tokens_used": 1410,
      "cost": 0.000428,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare RBC and TD performance in Q4 2023",
      "timestamp": "2025-08-25T00:11:36.978843"
    },
    {
      "scenario_id": "clarifier_009",
      "scenario_name": "Full Year Period",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            5
          ],
          "banks_detail": {
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1407,
          "cost": 0.000427
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2023,
              "quarters": [
                "Q1",
                "Q2",
                "Q3",
                "Q4"
              ]
            }
          },
          "tokens_used": 1922,
          "cost": 0.000586
        },
        "tokens_used": 3329,
        "cost": 0.001013
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          5
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3",
          "Q4"
        ]
      },
      "latency_ms": 1513.974666595459,
      "tokens_used": 3329,
      "cost": 0.001013,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show CIBC's full year 2023 results",
      "timestamp": "2025-08-25T00:11:38.492965"
    },
    {
      "scenario_id": "clarifier_010",
      "scenario_name": "Clear Period - Ambiguous Bank",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like to see the efficiency ratio for?"
        ],
        "tokens_used": 2949,
        "cost": 0.0008979999999999999
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 1535.423994064331,
      "tokens_used": 2949,
      "cost": 0.0008979999999999999,
      "confidence": null,
      "error": null,
      "model_used": "medium",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What was the efficiency ratio in Q2 2024?",
      "timestamp": "2025-08-25T00:11:40.028549"
    },
    {
      "scenario_id": "clarifier_001",
      "scenario_name": "Clear Bank and Period - RBC Q3 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1408,
          "cost": 0.001424
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q3"
              ]
            }
          },
          "tokens_used": 1914,
          "cost": 0.001938
        },
        "tokens_used": 3322,
        "cost": 0.003362
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 1654.4411182403564,
      "tokens_used": 3322,
      "cost": 0.003362,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me RBC's Q3 2024 financial results",
      "timestamp": "2025-08-25T00:11:41.683378"
    },
    {
      "scenario_id": "clarifier_002",
      "scenario_name": "Multiple Banks - Big Six Q2 2024",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2,
            3,
            4,
            5,
            6
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1419,
          "cost": 0.001445
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q2"
              ]
            }
          },
          "tokens_used": 3107,
          "cost": 0.003131
        },
        "tokens_used": 4526,
        "cost": 0.004576
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2,
          3,
          4,
          5,
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q2"
        ]
      },
      "latency_ms": 1727.9391288757324,
      "tokens_used": 4526,
      "cost": 0.004576,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare the Big Six banks performance in Q2 2024",
      "timestamp": "2025-08-25T00:11:43.411402"
    },
    {
      "scenario_id": "clarifier_003",
      "scenario_name": "Ambiguous Bank - No Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like the latest financial metrics for? Please specify the bank names.",
          "Which period would you like to see financial metrics for? (e.g., Q3 2025, Q2 2025, etc.)"
        ],
        "tokens_used": 2975,
        "cost": 0.003055
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 2351.607084274292,
      "tokens_used": 2975,
      "cost": 0.003055,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What are the latest financial metrics?",
      "timestamp": "2025-08-25T00:11:45.763112"
    },
    {
      "scenario_id": "clarifier_004",
      "scenario_name": "Clear Bank - Missing Period",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            2
          ],
          "banks_detail": {
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1403,
          "cost": 0.001419
        },
        "clarifications": [
          "What time period would you like to see TD Bank's revenue for?"
        ],
        "tokens_used": 3324,
        "cost": 0.0033689999999999996
      },
      "expected_output": {
        "status": "needs_clarification",
        "bank_ids": [
          2
        ],
        "needs_clarification": true
      },
      "latency_ms": 1637.988805770874,
      "tokens_used": 3324,
      "cost": 0.0033689999999999996,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show me TD Bank's revenue",
      "timestamp": "2025-08-25T00:11:47.401196"
    },
    {
      "scenario_id": "clarifier_005",
      "scenario_name": "Latest Period Request",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            3
          ],
          "banks_detail": {
            "3": {
              "id": 3,
              "name": "Bank of Montreal",
              "symbol": "BMO",
              "aliases": [
                "BMO",
                "Bank of Montreal",
                "Montreal Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1405,
          "cost": 0.001421
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2025,
              "quarters": [
                "Q3"
              ]
            }
          },
          "tokens_used": 1911,
          "cost": 0.001935
        },
        "tokens_used": 3316,
        "cost": 0.003356
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          3
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q3"
        ]
      },
      "latency_ms": 1332.3729038238525,
      "tokens_used": 3316,
      "cost": 0.003356,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Give me BMO's latest quarterly results",
      "timestamp": "2025-08-25T00:11:48.733659"
    },
    {
      "scenario_id": "clarifier_006",
      "scenario_name": "YTD Period Request",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            4
          ],
          "banks_detail": {
            "4": {
              "id": 4,
              "name": "Bank of Nova Scotia",
              "symbol": "BNS",
              "aliases": [
                "Scotia",
                "Scotiabank",
                "BNS",
                "Nova Scotia Bank"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1406,
          "cost": 0.001422
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2025,
              "quarters": [
                "Q1",
                "Q2",
                "Q3"
              ]
            }
          },
          "tokens_used": 1925,
          "cost": 0.001955
        },
        "tokens_used": 3331,
        "cost": 0.0033770000000000002
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          4
        ],
        "period_year": 2025,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3"
        ]
      },
      "latency_ms": 1636.9688510894775,
      "tokens_used": 3331,
      "cost": 0.0033770000000000002,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show Scotia's YTD 2025 performance",
      "timestamp": "2025-08-25T00:11:50.370779"
    },
    {
      "scenario_id": "clarifier_007",
      "scenario_name": "Bank Alias - National Bank",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            6
          ],
          "banks_detail": {
            "6": {
              "id": 6,
              "name": "National Bank of Canada",
              "symbol": "NA",
              "aliases": [
                "NBC",
                "National Bank",
                "National",
                "NA"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1410,
          "cost": 0.001426
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2024,
              "quarters": [
                "Q1"
              ]
            }
          },
          "tokens_used": 1909,
          "cost": 0.001933
        },
        "tokens_used": 3319,
        "cost": 0.003359
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          6
        ],
        "period_year": 2024,
        "period_quarters": [
          "Q1"
        ]
      },
      "latency_ms": 1434.9749088287354,
      "tokens_used": 3319,
      "cost": 0.003359,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What is National Bank's Q1 2024 net income?",
      "timestamp": "2025-08-25T00:11:51.805876"
    },
    {
      "scenario_id": "clarifier_008",
      "scenario_name": "Multiple Specific Banks",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            1,
            2
          ],
          "banks_detail": {
            "1": {
              "id": 1,
              "name": "Royal Bank of Canada",
              "symbol": "RY",
              "aliases": [
                "RBC",
                "Royal Bank",
                "Royal",
                "RY"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            },
            "2": {
              "id": 2,
              "name": "Toronto-Dominion Bank",
              "symbol": "TD",
              "aliases": [
                "TD",
                "TD Bank",
                "Toronto Dominion",
                "TD Canada Trust"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1410,
          "cost": 0.001428
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2023,
              "quarters": [
                "Q4"
              ]
            }
          },
          "tokens_used": 2158,
          "cost": 0.002182
        },
        "tokens_used": 3568,
        "cost": 0.00361
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          1,
          2
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q4"
        ]
      },
      "latency_ms": 1740.178108215332,
      "tokens_used": 3568,
      "cost": 0.00361,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Compare RBC and TD performance in Q4 2023",
      "timestamp": "2025-08-25T00:11:53.546189"
    },
    {
      "scenario_id": "clarifier_009",
      "scenario_name": "Full Year Period",
      "success": true,
      "actual_output": {
        "status": "success",
        "banks": {
          "status": "success",
          "decision": "banks_selected",
          "bank_ids": [
            5
          ],
          "banks_detail": {
            "5": {
              "id": 5,
              "name": "Canadian Imperial Bank of Commerce",
              "symbol": "CM",
              "aliases": [
                "CIBC",
                "CM",
                "Imperial Bank",
                "Canadian Imperial"
              ],
              "tags": [
                "canadian_big_six",
                "tier1_bank",
                "canadian"
              ],
              "databases": [
                "benchmarking",
                "pillar3",
                "reports",
                "rts",
                "transcripts"
              ]
            }
          },
          "tokens_used": 1407,
          "cost": 0.001423
        },
        "periods": {
          "status": "success",
          "decision": "periods_selected",
          "periods": {
            "apply_all": {
              "fiscal_year": 2023,
              "quarters": [
                "Q1",
                "Q2",
                "Q3",
                "Q4"
              ]
            }
          },
          "tokens_used": 1922,
          "cost": 0.001955
        },
        "tokens_used": 3329,
        "cost": 0.003378
      },
      "expected_output": {
        "status": "success",
        "bank_ids": [
          5
        ],
        "period_year": 2023,
        "period_quarters": [
          "Q1",
          "Q2",
          "Q3",
          "Q4"
        ]
      },
      "latency_ms": 1547.7261543273926,
      "tokens_used": 3329,
      "cost": 0.003378,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "Show CIBC's full year 2023 results",
      "timestamp": "2025-08-25T00:11:55.094044"
    },
    {
      "scenario_id": "clarifier_010",
      "scenario_name": "Clear Period - Ambiguous Bank",
      "success": true,
      "actual_output": {
        "status": "needs_clarification",
        "clarifications": [
          "Which banks would you like to see the efficiency ratio for?"
        ],
        "tokens_used": 2954,
        "cost": 0.003003
      },
      "expected_output": {
        "status": "needs_clarification",
        "needs_clarification": true
      },
      "latency_ms": 1538.8410091400146,
      "tokens_used": 2954,
      "cost": 0.003003,
      "confidence": null,
      "error": null,
      "model_used": "large",
      "prompt_version": null,
      "prompt_last_updated": null,
      "test_query": "What was the efficiency ratio in Q2 2024?",
      "timestamp": "2025-08-25T00:11:56.632951"
    }
  ],
  "generated_at": "2025-08-25T00:11:56.634277"
}