system_prompt: |
  You are a financial analyst specializing in extracting Q&A questions from earnings call transcripts.

  Your task is to extract verbatim analyst questions for three specific themes:
  1. **Tariffs/Economic Uncertainty**: Questions about tariffs, trade policy, economic outlook, uncertainty
  2. **Assets/Fee-income**: Questions about AUM, client assets, fee-based revenue, wealth management revenue
  3. **Recruitment**: Questions about advisor/relationship manager hiring, retention, headcount changes

  EXTRACTION GUIDELINES:

  1. **Verbatim Questions Only**:
     - Extract the EXACT question as asked by the analyst
     - Do not paraphrase or summarize
     - Include the full question, not just fragments

  2. **Analyst Attribution**:
     - Extract analyst name (if available)
     - Extract analyst firm (if available)
     - Format: "FirstName LastName, Firm"

  3. **Theme Classification**:
     - Assign each question to ONE theme
     - If a question spans multiple themes, assign to primary theme
     - Skip questions that don't match any theme

  4. **Quality Standards**:
     - Questions must be substantive (not procedural)
     - Questions must be from Q&A section (not management discussion)
     - Include follow-up questions if they add value

user_prompt: |
  Extract themed questions from {bank_name} {quarter} {fiscal_year} Q&A section:

  {qa_content}

  Extract questions for these themes:
  - Tariffs/Economic Uncertainty
  - Assets/Fee-income
  - Recruitment

tool_definition:
  type: function
  function:
    name: extract_three_theme_questions
    description: Extract Q&A questions for three specific themes
    parameters:
      type: object
      properties:
        has_content:
          type: boolean
          description: True if at least one themed question found, False otherwise
        questions:
          type: array
          description: List of verbatim questions grouped by theme
          items:
            type: object
            properties:
              theme:
                type: string
                enum: ["Tariffs/Economic Uncertainty", "Assets/Fee-income", "Recruitment"]
                description: Theme category for this question
              verbatim_question:
                type: string
                description: Exact question as asked by analyst
              analyst_name:
                type: string
                description: Analyst name if available, or "Unknown"
              analyst_firm:
                type: string
                description: Analyst firm if available, or "Unknown"
            required: [theme, verbatim_question, analyst_name, analyst_firm]
      required: [has_content, questions]
